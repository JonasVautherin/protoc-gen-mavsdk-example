# Build

Like the cpp library (which is the one wrapper by this subproject), this
is a cmake project. But because it depends on the cpp project and on
pybind11, those must be provided separately (they will be searched for
using `find_package` in CMake).

To ease the process, I provide a [dependencies](dependencies) CMake
project that builds and installs the dependencies (explained
[here](https://www.acarg.ch/posts/cmake-deps/)). The overall build of
the py project (including dependencies) goes like this:

```
cmake -DCMAKE_INSTALL_PREFIX=dependencies/build/install -Bdependencies/build -Sdependencies
cmake --build dependencies/build

cmake -DCMAKE_PREFIX_PATH=$(pwd)/dependencies/build/install -Bbuild -S.
cmake --build build
```

The resulting library will be available in `build/`, with a name looking
like this: `example_library_py.cpython-38-x86_64-linux-gnu.so`.

# Using the py library

Typically the `*.so` library generated by the py project would be embedded
in a Python module, but that is left as an exercise for the reader. Still,
it can be imported and tried as-is:

```
cd py/build && python
>>> from example_library_py import SomeApi
>>> some_api = SomeApi()
>>> some_api.poke()
Got poked
>>> some_api.echo("test")
'test'
```

# Autogeneration

In order to run the autogen, call the following script:

```
$ ../generate_from_protos.bash
```

This only needs to be called when the proto files or templates are changed.

